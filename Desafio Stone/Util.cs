using System;
using System.Collections.Generic;
using System.Linq;
using System.Text;
using System.Text.RegularExpressions;
using System.Threading.Tasks;

namespace Desafio_Stone
{
    class Util
    {
        public const string TEXTO_NO_IDIOMA_PREDATOR = "wfslhk slct slmzpg wdnkrx jxjc bppxs wbv ttgv pzxxd zqt fgmbxrd nrghqcp nqldnxz cscrnmzw bnvxjht clnckddt cdcvxjw mqplbpx scqc wtvwhj cwjw rkqp gvjrq jwvsjslq mkq kcsgk rdv gbjh fzwq vdxzrm znbjxqf mgxlrk gnn kngdxfcp rvjjhp jrm wnphjqfv dhr lppqxzfj kkbgbrm dpbg xtp mpwtn fghksjh kvlvnxb wvpvcbw mmsmnm lzccq fmjrnmn dllc brjf mmcl ffbhgnk jqcgkls nldbr ffkx mcvqt prnprxxd nxqr nxmrf mzklwvs kwxhfw jdcmszhh hsmxxhdw jnjmqgx rsrbvkt kbpv ffrbgl rhkkmhv bcfkvfj rtcmx mbjvq ftg fgfwbcrh rdkglj qqmsnz dnqb tkfhmwt gpmlfq fkh fftrmdgd vctsff hrmnbd smkqb mrrdxfrn xvlljclx blnbv nsw jzxlssg ljrz kbklpnp zkpcj kgct znvqbd ffksdqbj vrnc hqsz mlrkmccx xptmm sjlgxw qznt hqxts ssd dndcj hslhm slpqxk xvqzvw xlr zglqwb mxcgt nhhh zfwlmqfk jjm jcqg wjfgrccm thmmtx kjrjjdtp ksgx bxbm fqcm clmh vtwkwg ncrfsjhw pbhnwxd klnnlxv kpwd dxldszgn whhg bpxh sqwdtnnz wffwkmdm brzzd hgdvl vszpkmph gtqwpg kszkmp rlzgpfx lwglvt bzmsrrnn vgl nnpn dvfrllx jcj ccstglq kvngkjv snvh fhwqtk wmwdhq bklpm xxwvrjgg nzksndv cldshlc snkkzdgd ndjk lws djcfzpth tjh xtklgs krwqw qhzvjgkb ppfwwfg cxrbmmv jxdqcdvk mpbfhn xmhqfkjh cnlzkn llp btzmzz ndgjcm cjdfm zzszd xrq xzvbdkf rvjwxbc skggk dvjwpvf pcmtxsg mgrfjvb ztmk wrjwstw bxccp sqrxtw lbkww vpbmpsl lfsdkcfh bmzdfldh vjzhh jfx knxbl ksm whgwbs ffwgps vzgghfs cwltlz jzhh rsqhq wmdxht nwfscz kmhrgv pmjlf zrtlnqj sjkrzvcb ppstn mdjtrw jtzqm bnv dmn vcpjdnvr dtbrsz smcvhgx ssbrn bdpk gdm qnpxdmh vrstmtxf rplvnnv lptm cgmwltx vnlh cdkfsqgb zrzqvpvl cbvztjt fwgbmv rsq tkgmgpgz cfmjqbw hhtlb czbx xhfstbp bqmhq mcll qcqlkqxh ddnnzmd wmqpknxv rtfnpt vlj mrtdlp tnlxsv lwr dnsscxwx sxzf lqhwtkcw qmf tpbmqmr whx gwzkqthv ggcwcld hqjt shvsz xwzgcbxc cqtp qbprvb wlr sgbwbffj dtdwd gmsvlhz bkpgkqj qbgvqmz xbbmqcx dwcxrw gqfzxhm dzcmb nkzfr hnvvpxxm qxzz nnxvw dvgz pwmnh lpqvpz jnz lrwxvx khh lnpxlds fcxzk kpdb plkvvd xtwwr nrgfjsl dprjfplf mqzpn zpvd qrz nmzzx ccwhm lpmrl gtqrjn ssqmq gzrkjstk gdc wrbbqql vqwzdxbr npv rxqw mbmqzv mnbncv jmrrm dwjkv wlxg npgcb klzwkm znxql zbg btb bplsh xmxl plqlwhzh nlbwlpdt jtzbn mdvslnw rhrcvxhk qhvd rswtf cksssmjt pnn czj xkm lmv plwd kmckd ztfx nkzx wltfpj gdsc jmltszsw zvnvm dhd tsclv dzkdj hmpmjxf qstfxh xctjh tht wgh lzjbckr dmblrlmb jxfk tjg jxc qpg rvmxfq crjkbdl kxhpjb fgkcgwjh pwfw zccc wvv bxq bgdxfb lbtmrmv bpb jtvjbwct hmqwrnt qgpbzsn wdhgfb bwh vrq dbfj vfxsv qbqwbx wtd qqzmlmrw zbl xjmfjtw qlfkxlk ggfnbhzc cvrs jbchg wqwfff cnrljfp brvljmjg brb mtkxnjl xwwnfbh rtqvr qhzhz mhlsfk tfdgv bpw dnwq fljqkp tbqd txgf qcs dgklqgrq qfm pfmfxbmt ptbtgkw prmtv lfkbtrj tqc hkc rqbg mjgqntg dxnph ktgq mqtnctb fxkvsnkj jdt hbrgckkn qtblptvw rgpgbjdm cgzv cmrrrrr rvztsr wrprlfj crvwkzf xkzt clvrcd dqnqr tsmfxhhb mwfqnp phf pqwpgbb lrbr gszz sghld znqtwz dkkkfhr rvd rtmc swdd cvrpxh jfkr dcmslljx pwmcbvnd lffgltzq tgr fvjkklmc zkjxdtjc ntf nqbsj swx bpnqv fbg ddrf srcjf zlfd jbck vzkvbd gkndtfbw smq sms zxdghtdb gqwhb nrtl mwdvdxs stvntw xhwpbbh bgwshj rpqwfbl zph wmzzlfzt njvkn mclc crspz ccfc bwbxpx rgzqwkcs lnnclj sbqqc rvdr vcjjbx gvf gqrhz znml jlhlts tplrlt gxbc qwrj hnfqszjc gvl tfxd hfstzw whbpsmzw drz cxqdn lnpvwgp dlslvr cxtf bvkxz jqkqc xxxc mzsmxfmh nhxhr plcjs cwrrtfp grvfpw qvtbptw thpg qrvhqcrj klz wsltjrpg bcrgmxdx gklqvv bplvmlkk slqbzbwf wvmvnd xzbdbks dndhblt psd ncq dnnvflzd cxl lzl spzgrq gdn xfszg xxptpd ffrjctnr jdcqvt pnjhnrv wpzm zllsjksn lfcst qxkw qzhsq bplsdsqj thvwvf dnxzkx rmx mtgqg grrjd mngxjp fwgxdb hjkp hzh kgw fvpqj mlx pdwtggbs jvk tbrlldjp dzhdn fpdvshhv xtn jlkh jdjqpxl xkxm lxhcmtf xrs gqhp jww kbpf tsltgz qfm wdbxshhs dvdndt wmr ctbttqbl btjccvt pbdmll cjn skrlsbb crqglpq xhqsh lvv rwlpj qxrsdj bwwqwz czqcr sfshjz tjtmnsmf hckg txfnhcx qqmc snwjw kqbkjwb khwcn glt zbcttf tlxvpl fdv vfb ndwvpv szsgpdjj ktrwnbmd qpqp cnht jmtcglg mrbmxxk nsqrk qffmh wswzqz lqp cmxfjlsx vhgzznwq dpzcms frgdg njc wpqhtnz stqhgqh txkn cknrbwlk rdx qqpnd gwsq jcsd jpq pkv rssfbtzh";

        //public static readonly char[] LETRAS_TIPO_LOVE = { 't', 'w', 'j', 'p', 'x' };

        const string REGEX_LETRAS_TIPO_LOVE = "[twjpx]";

        public static int DescobrirQuantidadeDePreposicoesNoTexto(string texto)
        {
            int quantidadeDePreposicoes = 0;

            List<string> palavrasDoTexto = criarListaComPalavrasDoTexto(texto);

            foreach (var palavra in palavrasDoTexto)
            {
                if (EhPreposicao(palavra))
                    quantidadeDePreposicoes++;
            }

            return quantidadeDePreposicoes;
        }

        private static bool EhPreposicao(string palavra)
        {
            if (palavra.Length == 3 && !palavra.Contains("h") && UltimaLetraEhTipoLove(palavra))
                return true;

            return false;
        }

        private static bool UltimaLetraEhTipoLove(string palavra)
        {
            return Regex.IsMatch(palavra[palavra.Length - 1].ToString(), REGEX_LETRAS_TIPO_LOVE);
        }

        public static int DescobrirQuantidadeDeVerbosNoTexto(string texto, out int quantidadeDeVerbosEmPrimeiraPessoa)
        {
            int quantidadeDeVerbos = 0;
            quantidadeDeVerbosEmPrimeiraPessoa = 0;

            List<string> palavrasDoTexto = criarListaComPalavrasDoTexto(texto);

            foreach (var palavra in palavrasDoTexto)
            {
                if (EhVerbo(palavra))
                {
                    quantidadeDeVerbos++;

                    if (VerboEstaEmPrimeiraPessoa(palavra))
                        quantidadeDeVerbosEmPrimeiraPessoa++;
                }
            }

            return quantidadeDeVerbos;
        }

        private static bool EhVerbo(string palavra)
        {
            if (palavra.Length >= 6 && !UltimaLetraEhTipoLove(palavra))
                return true;

            return false;
        }

        private static bool VerboEstaEmPrimeiraPessoa(string verbo)
        {
            return Regex.IsMatch(verbo[0].ToString(), REGEX_LETRAS_TIPO_LOVE);
        }

        public static List<string> CriarVocabularioPedrator(string texto)
        {
            List<string> palavrasDoTexto = criarListaComPalavrasDoTexto(texto);

            ComparadorDeStrings comparador = new ComparadorDeStrings();

            palavrasDoTexto.Distinct().ToArray();

            palavrasDoTexto.Sort(comparador);

            return palavrasDoTexto;
        }

        private static List<string> criarListaComPalavrasDoTexto(string texto)
        {
            string[] palavrasDoTexto = texto.Split(' ');
            List<string> listaDePalavrasDoTexto = new List<string>();

            foreach (var palavra in palavrasDoTexto)
            {
                listaDePalavrasDoTexto.Add(palavra);
            }

            return listaDePalavrasDoTexto;
        }

        public static int DescobrirQuantidadeDeNumerosBonitosDistintosNoTexto(string texto, out int quantidadeDeNumerosLindosDistintosNoTexto)
        {
            int quantidadeDeNumerosBonitosDistintosNoTexto = 0;
            quantidadeDeNumerosLindosDistintosNoTexto = 0;

            List<string> palavrasDoTexto = criarListaComPalavrasDoTexto(texto).Distinct().ToList();
            string ordem = "qwtrbnvmczspkjgxdflh";

            foreach (var palavra in palavrasDoTexto)
            {
                var letrasDaPalavra = palavra.ToCharArray();

                int totalDaPalavra = 0;
                int multiplicador = 1;

                for (int i = 0; i < letrasDaPalavra.Length; i++)
                {
                    totalDaPalavra += (ordem.IndexOf(letrasDaPalavra[i]) * multiplicador);

                    multiplicador = multiplicador * 20;
                }

                if (totalDaPalavra >= 623732 && (totalDaPalavra % 4 == 0))
                {
                    quantidadeDeNumerosBonitosDistintosNoTexto++;

                    if (EhPrimo(totalDaPalavra.ToString().Sum(c => c - '0')))
                        quantidadeDeNumerosLindosDistintosNoTexto++;
                }
            }

            return quantidadeDeNumerosBonitosDistintosNoTexto;
        }

        private static bool EhPrimo(int numero)
        {
            if (numero == 1) return false;
            if (numero == 2) return true;

            var limite = (int)Math.Floor(Math.Sqrt(numero));

            for (int i = 2; i <= limite; ++i)
            {
                if (numero % i == 0) return false;
            }

            return true;
        }
    }
}
